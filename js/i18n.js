

const translations = {
    es: {
        header: {
            navHome: 'Inicio',
            navServices: 'Servicios',
            navBenefits: 'Beneficios',
            navBlog: 'Blog',
            demoButton: 'Demo IA',
            demoButtonFull: 'Solicitar Demo IA',
        },
        footer: {
            slogan: 'Automatiza. Conecta. Crece.',
            legal: 'Legal',
            privacy: 'Política de Privacidad',
            terms: 'Términos de Servicio',
            contact: 'Contacto',
            email: 'Email: info@nodica.pro',
            phone: 'Teléfono: +52 1 834 508 8993',
            rights: 'Todos los derechos reservados.',
        },
        home: {
            heroTitle: 'Automatiza. Conecta. Crece.',
            heroSubtitle: 'Ayudamos a las PYMEs a alcanzar su máximo potencial con soluciones tecnológicas inteligentes y a medida.',
            heroButton: 'Solicitar Diagnóstico Gratis',
            servicesTitle: 'Capacidades Principales',
            servicesSubtitle: 'Nuestras tres áreas de especialización para impulsar tu negocio.',
            solutionsTitle: 'Nuestras Soluciones Clave',
            solutionsSubtitle: 'Creamos sistemas que trabajan para ti, 24/7. Haz clic en una tarjeta para ver más.',
            benefitsTitle: '¿Por qué Nodica?',
            benefitsSubtitle: 'Tu socio tecnológico para un crecimiento sostenible.',
            benefit1Title: 'Más Eficiencia',
            benefit1Desc: 'Reduce costos y tiempos operativos hasta en un 70%.',
            benefit2Title: 'Mejores Decisiones',
            benefit2Desc: 'Utiliza datos e IA para tomar decisiones estratégicas informadas.',
            benefit3Title: 'Escalabilidad',
            benefit3Desc: 'Tecnología que crece contigo y se adapta a tus necesidades futuras.',
            testimonialsTitle: 'Lo que dicen nuestros clientes',
            ctaTitle: '¿Listo para transformar tu negocio?',
            ctaSubtitle: 'Hablemos de tus desafíos y exploremos juntos cómo la tecnología puede ser tu mayor aliado.',
            ctaButton: 'Inicia tu Transformación',
            testimonial1: 'Nodica transformó nuestra operación. La automatización de facturas nos ahorró 20 horas a la semana.',
            testimonial2: 'La app a medida que desarrollaron es el núcleo de nuestra logística. Intuitiva, rápida y fiable.',
        },
        servicesPage: {
            title: 'Nuestros Servicios',
            subtitle: 'Soluciones tecnológicas completas para la PYME moderna.',
            learnMoreButton: 'Saber Más',
        },
        blogPage: {
            title: 'Blog de Innovación',
            subtitle: 'Ideas, tendencias y consejos sobre tecnología para PYMEs.',
            adminLink: 'Ir al panel de administración para crear un nuevo post.',
        },
        blogPostPage: {
            publishedBy: 'Publicado por',
            on: 'el',
            notFound: 'Post no encontrado',
            backToBlog: 'Volver al blog',
            backToAll: 'Volver a todos los posts',
        },
        adminPage: {
            title: 'Panel de Administración',
            subtitle: 'Crear un nuevo artículo para el blog.',
            formTitle: 'Título',
            formExcerpt: 'Extracto (Resumen)',
            formContent: 'Contenido (HTML permitido)',
            formImage: 'URL de la Imagen',
            formButton: 'Publicar Artículo',
        },
        modals: {
            aiAssistant: 'Asistente IA',
            demoButton: 'Quiero una Demo',
            solutionButton: 'Lo quiero',
            challenge: 'El Desafío',
            solution: 'La Solución Nodica',
        },
        aiService: {
            initial: '¡Hola! Bienvenido a Nodica. Para poder ayudarte mejor y darte una atención personalizada, ¿serías tan amable de proporcionarme tu correo electrónico?',
            emailSuccess: '¡Perfecto! Hemos recibido tu email. Un especialista se pondrá en contacto contigo en las próximas 24 horas. Mientras tanto, ¿tienes alguna pregunta sobre lo que hacemos o cómo podemos ayudarte a crecer?',
            emailInvalid: 'Mmm, parece que eso no es un correo electrónico válido. Para poder continuar y ofrecerte una demo personalizada, ¿podrías intentarlo de nuevo, por favor? Solo necesito tu email.',
            priceQuery: 'Entiendo tu pregunta sobre los precios. Cada solución que creamos es única y se adapta a las necesidades del cliente, por lo que los costos varían. Pero no te preocupes, el especialista que te contactará podrá darte una cotización detallada y sin compromiso. ¿Hay algo más que te gustaría saber?',
            thanks: '¡De nada! Ha sido un placer conversar contigo. Si tienes más dudas, aquí estaré para ayudarte. ¡Que tengas un excelente día!',
            servicesQuery: 'Ofrecemos principalmente Automatización de Procesos (RPA), Desarrollo de Aplicaciones a Medida, e implementación de soluciones con Inteligencia Artificial. ¿Te gustaría que te diera más detalles sobre alguno en particular?',
            fallback: 'Es una pregunta muy interesante. Nuestro especialista podrá darte todos los detalles al respecto en la llamada. ¿Hay alguna otra duda que pueda resolverte ahora mismo?',
            inputPlaceholderEmail: 'Escribe tu email...',
            inputPlaceholderGeneric: 'Escribe tu mensaje...',
            writing: 'Escribiendo...',
        },
        common: {
            readMore: 'Leer más',
        }
    },
    en: {
        header: {
            navHome: 'Home',
            navServices: 'Services',
            navBenefits: 'Benefits',
            navBlog: 'Blog',
            demoButton: 'AI Demo',
            demoButtonFull: 'Request AI Demo',
        },
        footer: {
            slogan: 'Automate. Connect. Grow.',
            legal: 'Legal',
            privacy: 'Privacy Policy',
            terms: 'Terms of Service',
            contact: 'Contact',
            email: 'Email: info@nodica.pro',
            phone: 'Phone: +52 1 834 508 8993',
            rights: 'All rights reserved.',
        },
        home: {
            heroTitle: 'Automate. Connect. Grow.',
            heroSubtitle: 'We help SMEs reach their full potential with smart, tailor-made technology solutions.',
            heroButton: 'Request Free Diagnosis',
            servicesTitle: 'Core Capabilities',
            servicesSubtitle: 'Our three areas of expertise to boost your business.',
            solutionsTitle: 'Our Key Solutions',
            solutionsSubtitle: 'We build systems that work for you, 24/7. Click on a card to see more.',
            benefitsTitle: 'Why Nodica?',
            benefitsSubtitle: 'Your technology partner for sustainable growth.',
            benefit1Title: 'More Efficiency',
            benefit1Desc: 'Reduce operational costs and times by up to 70%.',
            benefit2Title: 'Better Decisions',
            benefit2Desc: 'Use data and AI to make informed strategic decisions.',
            benefit3Title: 'Scalability',
            benefit3Desc: 'Technology that grows with you and adapts to your future needs.',
            testimonialsTitle: 'What our clients say',
            ctaTitle: 'Ready to transform your business?',
            ctaSubtitle: 'Let\'s talk about your challenges and explore together how technology can be your greatest ally.',
            ctaButton: 'Start Your Transformation',
            testimonial1: 'Nodica transformed our operations. Automating invoices saved us 20 hours a week.',
            testimonial2: 'The custom app they developed is the core of our logistics. Intuitive, fast, and reliable.',
        },
        servicesPage: {
            title: 'Our Services',
            subtitle: 'Complete technology solutions for the modern SME.',
            learnMoreButton: 'Learn More',
        },
        blogPage: {
            title: 'Innovation Blog',
            subtitle: 'Ideas, trends, and technology tips for SMEs.',
            adminLink: 'Go to the admin panel to create a new post.',
        },
        blogPostPage: {
            publishedBy: 'Published by',
            on: 'on',
            notFound: 'Post not found',
            backToBlog: 'Back to blog',
            backToAll: 'Back to all posts',
        },
        adminPage: {
            title: 'Admin Panel',
            subtitle: 'Create a new blog article.',
            formTitle: 'Title',
            formExcerpt: 'Excerpt (Summary)',
            formContent: 'Content (HTML allowed)',
            formImage: 'Image URL',
            formButton: 'Publish Article',
        },
        modals: {
            aiAssistant: 'AI Assistant',
            demoButton: 'I want a Demo',
            solutionButton: 'I want this',
            challenge: 'The Challenge',
            solution: 'The Nodica Solution',
        },
        aiService: {
            initial: 'Hello! Welcome to Nodica. To better assist you and provide personalized attention, could you please provide your email address?',
            emailSuccess: 'Perfect! We have received your email. A specialist will contact you within the next 24 hours. In the meantime, do you have any questions about what we do or how we can help you grow?',
            emailInvalid: 'Hmm, that doesn\'t seem to be a valid email address. To proceed and offer you a personalized demo, could you please try again? I just need your email.',
            priceQuery: 'I understand your question about pricing. Every solution we create is unique and tailored to the client\'s needs, so costs vary. But don\'t worry, the specialist who contacts you will be able to provide a detailed, no-obligation quote. Is there anything else you\'d like to know?',
            thanks: 'You\'re welcome! It was a pleasure chatting with you. If you have any more questions, I\'ll be here to help. Have a great day!',
            servicesQuery: 'We primarily offer Process Automation (RPA), Custom Application Development, and the implementation of Artificial Intelligence solutions. Would you like me to give you more details on any of them?',
            fallback: 'That\'s a very interesting question. Our specialist will be able to give you all the details on the call. Is there any other question I can answer for you right now?',
            inputPlaceholderEmail: 'Enter your email...',
            inputPlaceholderGeneric: 'Type your message...',
            writing: 'Typing...',
        },
        common: {
            readMore: 'Read more',
        }
    }
};

const getInitialLang = () => {
    const storedLang = localStorage.getItem('nodica_lang');
    if (storedLang && ['es', 'en'].includes(storedLang)) {
        return storedLang;
    }

    const browserLang = (navigator.language || navigator.userLanguage || 'en').toLowerCase();
    if (browserLang.startsWith('es')) {
        return 'es';
    }

    // Default to English if no reference is found or browser lang is not Spanish
    return 'en';
};

let currentLang = getInitialLang();

const getLang = () => currentLang;

const setLang = (lang) => {
    if (['es', 'en'].includes(lang)) {
        currentLang = lang;
        localStorage.setItem('nodica_lang', lang);
    }
};

const t = (key) => {
    const keys = key.split('.');
    let result = translations[currentLang];
    for (const k of keys) {
        result = result ? result[k] : undefined;
    }

    if (result) {
        return result;
    }

    // Fallback to English if key not found in current language
    console.warn(`Translation not found for key: ${key} in lang: ${currentLang}. Falling back to English.`);
    let fallback = translations.en;
    for (const k of keys) {
        fallback = fallback ? fallback[k] : undefined;
    }
    return fallback || key;
};

export const i18n = { getLang, setLang, t };